[gd_scene load_steps=6 format=1]

[ext_resource path="res://level/Level.tscn" type="PackedScene" id=1]
[ext_resource path="res://menu/elements/menu_button.tscn" type="PackedScene" id=2]
[ext_resource path="res://assets/exit.png" type="Texture" id=3]
[ext_resource path="res://level/sidebar.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=1]

script/source = "extends Node

onready var level = get_node(\"Level\")
var trap_class = load(\"res://level/Trap.tscn\")
var mouse_offset = Vector2(-320,-60)

func _ready():
	set_process_input(true)

func _input(ev):
	if ev.type == InputEvent.MOUSE_BUTTON and ev.button_index == BUTTON_LEFT:
		#pressed = ev.pressed
		var trap = trap_class.instance()
		trap.damage =5
		trap.set_pos(ev.pos + mouse_offset)
		level.placeTrap(trap)#,ev.global_pos)"

[node name="gui" type="Node2D"]

script/script = SubResource( 1 )

[node name="Level" parent="." instance=ExtResource( 1 )]

[node name="mana" type="Node2D" parent="."]

transform/pos = Vector2( 0, 1064 )

[node name="ManaText" type="Label" parent="mana"]

focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 49.0
margin/bottom = 15.0
text = "Mana:"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="ManaBar" type="ProgressBar" parent="mana"]

focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 50.0
margin/top = 0.0
margin/right = 1920.0
margin/bottom = 16.0
range/min = 0.0
range/max = 100.0
range/step = 1.0
range/page = 0.0
range/value = 100.0
range/exp_edit = false
range/rounded = false
percent/visible = true

[node name="ExitButton" parent="." instance=ExtResource( 2 )]

margin/left = 1860.0
margin/right = 1920.0
margin/bottom = 60.0
textures/normal = ExtResource( 3 )
params/scale = Vector2( 1, 1 )
nextScene = "res://menu/menu.tscn"

[node name="trap_sidebar" parent="." instance=ExtResource( 4 )]

[node name="monster_sidebar" parent="." instance=ExtResource( 4 )]

transform/pos = Vector2( 1600, 60 )


